<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>日志添加</title>
<style>
    .blog{
        border-radius: 5px;
        margin-top: 10px;
        background-color: white;
    }
    .input-group input{
        width: 61.8%;
    }
    textarea{
        width: 61.8%;
    }
    .input-group label{
        font-size: 20px;
    }
</style>
    <link rel="stylesheet" href="../static/css/blog.css">
    <link rel="stylesheet" type="text/css" href="../static/css/style.css" />
    <script type="text/javascript" src="../static/js/jquery.js"></script>
    <script src="../static/js/sha1.min.js"></script>
    <script src="../static/js/sticky.min.js"></script>
    <script src="../static/js/vue.min.js"></script>
    <script src="../static/js/awesome.js"></script>
    <script>
var
    ID = '{{ id }}',
    action = '{{ action }}';
function initVM(blog) {
    var vm = new Vue({
        el: '#vm',
        data: blog,
        methods: {
            submit: function (event) {
                event.preventDefault();
                var $form = $('#vm').find('form');
                $form.postJSON(action, this.$data, function (err, r) {
                    if (err) {
                        $form.showFormError(err);
                    }
                    else {
                        return location.assign('/api/blogs/' + r.id);
                    }
                });
            }
        }
    });
    $('#vm').show();
}
$(function () {
    if (ID) {
        getJSON('/api/blogs/' + ID, function (err, blog) {
            if (err) {
                return fatal(err);
            }
            $('#loading').hide();
            initVM(blog);
        });
    }
    else {
        $('#loading').hide();
        initVM({
            name: '',
            summary: '',
            content: ''
        });
    }
});
    </script>
</head>
<body id="botAgregar">
<script type="text/javascript">$.AutomLeafStart({leafsfolder:"../static/images/",howmanyimgsare:8,initialleafs:10,maxYposition:-10,multiplyclick:true,multiplynumber:2,infinite:true,fallingsequence:4000});$("#botAgregar").on("click",function(){$.AutomLeafAdd({leafsfolder:"../static/images/",add:8,})});</script>
<div class="layout" style="width:1400px; margin:auto; line-height:30px; margin-top:90px;">
<header>
    <div class="logo"></div>
    <div class="content">
        <div class="home">
            <a href="/">首页</a>
        </div>
        <div class="find">
            <a href="/">发现</a>
        </div>
        <div class="code">
            <a href="/">源码</a>
        </div>
    </div>
    {% if user %}
    <div class="person">
        <a>{{ user.name }}</a>
        <div style="margin-top: 3px; float: left">
                <img src="../static/img/person.png" width="20" height="20" >
            </div>
        <div class="person-content">
            <p><a href="/blogs/create">日志添加</a></p>
            <p><a href="/blogs">日志管理</a></p>
            <p><a href="/signout">退出登录</a></p>
        </div>
    </div>
    {% else %}
        <div class="person">
            <a href="/signin">登录</a>
        </div>
    {% endif %}
</header>
<div class="blog">
    <h2 style="margin-left: 20px;">日志添加</h2>
       <div id="vm" style="margin-left: 20px" class="input-group">
           <form v-on="submit: submit" >
               <div>
                   <label>标题:</label>
                   <div>
                       <input v-model="name" name="name" type="text" placeholder="标题">
                   </div>
               </div>
               <div>
                   <label>摘要:</label>
                   <div>
                       <textarea v-model="summary" rows="4" name="summary" placeholder="摘要"style="resize:none;"></textarea>
                   </div>
               </div>
               <div>
                   <label>内容:</label>
                   <div>
                       <textarea v-model="content" rows="16" name="content" placeholder="内容"style="resize:none;"></textarea>
                   </div>
               </div>
               <div>
                   <button type="submit" style="border-radius: 3px;background-color: #0f88eb;color: white;border:none;font-size: 20px;margin-bottom: 10px;"><img src="../static/img/save.png" width="16" height="16">保存</button>
                   <a href="/" style="font-size: 20px;">取消</a>
               </div>
           </form>
       </div>
   </div>
<footer>
    <p>
        友情链接:
        <a href="https://github.com/Lvconl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="../static/img/GitHub.png"></a>
        <a href="/">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="../static/img/school.png"></a>
    </p>
    <p>Powered by <a href="mailto:835132735@qq.com">lvconl </a>Copyright @copy; 2018.</p>
    <a href="https://github.com/Lvconl" target="_blank">lvconl</a>.All right reserved.
</footer>
</div>
</body>
</html>